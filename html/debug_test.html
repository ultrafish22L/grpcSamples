<!DOCTYPE html>
<html>
<head>
    <title>LiveLink Debug Test</title>
</head>
<body>
    <h1>LiveLink Debug Test</h1>
    <div id="output"></div>

    <!-- Load dependencies in order -->
    <!-- <script src="https://unpkg.com/google-protobuf@3.21.2/google-protobuf.js"></script> -->
    <!-- <script src="https://unpkg.com/grpc-web@1.5.0/index.js"></script> -->
    
    <!-- Module loader -->
    <!-- <script src="module-loader.js"></script> -->
    
    <!-- Use custom LiveLink implementation -->
    <script src="livelink.js"></script>
    <script>
        function log(message) {
            const output = document.getElementById('output');
            output.innerHTML += '<div>' + new Date().toLocaleTimeString() + ': ' + message + '</div>';
            console.log(message);
        }
        
        log('Starting debug test...');
        log('typeof LiveLinkClient: ' + typeof LiveLinkClient);
        log('typeof LiveLinkManager: ' + typeof LiveLinkManager);
        log('Custom LiveLink implementation loaded');
        
        // List all global variables that might be related to LiveLink
        const liveLinkRelated = Object.keys(window).filter(k => k.includes('LiveLink'));
        log('LiveLink-related globals: ' + liveLinkRelated.join(', '));
        
        // Test LiveLink functionality
        if (typeof LiveLinkClient !== 'undefined') {
            log('Testing LiveLink client creation...');
            try {
                const testClient = new LiveLinkClient();
                log('LiveLink client created successfully');
                log('Client methods: ' + Object.getOwnPropertyNames(Object.getPrototypeOf(testClient)).join(', '));
            } catch (error) {
                log('Error creating LiveLink client: ' + error.message);
            }
        }
        
        if (typeof LiveLinkManager !== 'undefined') {
            log('Testing LiveLink manager...');
            try {
                const manager = new LiveLinkManager();
                log('LiveLink manager created successfully');
            } catch (error) {
                log('Error creating LiveLink manager: ' + error.message);
            }
        }
    </script>
</body>
</html>