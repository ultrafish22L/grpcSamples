# Simple test build for gRPC connection testing
cmake_minimum_required(VERSION 3.16)

# Add the test executable
add_executable(test_grpc_connection test_grpc_connection.cpp)

# Link with shared library that contains camera_sync_livelink
target_link_libraries(test_grpc_connection 
    shared_lib
    ${GRPC_LIBRARIES}
    ${PROTOBUF_LIBRARIES}
)

# Include directories
target_include_directories(test_grpc_connection PRIVATE
    ${CMAKE_CURRENT_SOURCE_DIR}
    ${CMAKE_CURRENT_SOURCE_DIR}/shared
    ${CMAKE_CURRENT_SOURCE_DIR}/shared/generated
)

# Set output directory
set_target_properties(test_grpc_connection PROPERTIES
    RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/../bin
)

# Add the bug testing executable
add_executable(test_grpc_bugs test_grpc_bugs.cpp)

# Link with shared library that contains camera_sync_livelink
target_link_libraries(test_grpc_bugs 
    shared_lib
    ${GRPC_LIBRARIES}
    ${PROTOBUF_LIBRARIES}
)

# Include directories
target_include_directories(test_grpc_bugs PRIVATE
    ${CMAKE_CURRENT_SOURCE_DIR}
    ${CMAKE_CURRENT_SOURCE_DIR}/shared
    ${CMAKE_CURRENT_SOURCE_DIR}/shared/generated
)

# Set output directory
set_target_properties(test_grpc_bugs PROPERTIES
    RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/../bin
)