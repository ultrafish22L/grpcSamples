<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="1400" d:DesignHeight="900"
        x:Class="AvaloniaGrpcTest.MainWindow"
        Title="Octane gRPC Testbed - Professional Edition"
        Background="#2d2d30"
        MinWidth="1200" MinHeight="700">

    <Window.Styles>
        <Style Selector="TabItem">
            <Setter Property="Background" Value="#3c3c3c"/>
            <Setter Property="Foreground" Value="#ffffff"/>
            <Setter Property="BorderBrush" Value="#555555"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="Margin" Value="0,0,2,0"/>
        </Style>
        <Style Selector="TabItem:selected">
            <Setter Property="Background" Value="#007acc"/>
            <Setter Property="Foreground" Value="#ffffff"/>
        </Style>
        <Style Selector="TabItem:pointerover">
            <Setter Property="Background" Value="#4a4a4a"/>
        </Style>
        <Style Selector="Button">
            <Setter Property="Background" Value="#0e639c"/>
            <Setter Property="Foreground" Value="#ffffff"/>
            <Setter Property="BorderBrush" Value="#007acc"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="Margin" Value="4"/>
        </Style>
        <Style Selector="Button:pointerover">
            <Setter Property="Background" Value="#1177bb"/>
        </Style>
        <Style Selector="Button:disabled">
            <Setter Property="Background" Value="#555555"/>
            <Setter Property="Foreground" Value="#999999"/>
        </Style>
        <Style Selector="TextBox">
            <Setter Property="Background" Value="#1e1e1e"/>
            <Setter Property="Foreground" Value="#ffffff"/>
            <Setter Property="BorderBrush" Value="#555555"/>
        </Style>
        <Style Selector="TextBlock">
            <Setter Property="Foreground" Value="#ffffff"/>
        </Style>
    </Window.Styles>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>  <!-- Header -->
            <RowDefinition Height="*"/>     <!-- Content -->
        </Grid.RowDefinitions>
        
        <!-- Header with Connection Controls -->
        <Border Grid.Row="0" Background="#1e1e1e" BorderBrush="#555555" BorderThickness="0,0,0,1" Padding="20,15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- Title -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="ðŸ”¥" FontSize="24" Margin="0,0,10,0"/>
                    <TextBlock Text="Octane gRPC Testbed" FontSize="20" FontWeight="Bold" 
                               Foreground="#ff6b35" VerticalAlignment="Center"/>
                    <TextBlock Text="Professional Edition" FontSize="12" 
                               Foreground="#cccccc" VerticalAlignment="Bottom" Margin="10,0,0,2"/>
                </StackPanel>
                
                <!-- Connection Controls -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="Server:" VerticalAlignment="Center" Margin="0,0,8,0"/>
                    <TextBox Name="ServerTextBox" Text="localhost:51022" Width="180" 
                             VerticalAlignment="Center" Margin="0,0,10,0"/>
                    <Button Name="ConnectButton" Content="Connect" Click="ConnectButton_Click" 
                            VerticalAlignment="Center" Margin="0,0,10,0"/>
                    <Border Background="#333333" CornerRadius="12" Padding="12,6" VerticalAlignment="Center">
                        <StackPanel Orientation="Horizontal">
                            <Ellipse Name="StatusIndicator" Width="8" Height="8" Fill="Red" 
                                     VerticalAlignment="Center" Margin="0,0,8,0"/>
                            <TextBlock Name="StatusText" Text="Disconnected" 
                                       FontWeight="Bold" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Main Content with Tabs -->
        <TabControl Grid.Row="1" Background="#2d2d30" Margin="0">
            
            <!-- LiveLink Tab -->
            <TabItem Header="ðŸŽ¥ LiveLink">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>      <!-- 3D Viewport -->
                        <ColumnDefinition Width="350"/>    <!-- Debug Log Panel -->
                        <ColumnDefinition Width="300"/>    <!-- Controls Panel -->
                    </Grid.ColumnDefinitions>
                    
                    <!-- 3D Viewport -->
                    <Border Grid.Column="0" Background="#1a1a1a" BorderBrush="#555555" BorderThickness="1" Margin="10">
                        <Grid>
                            <!-- Placeholder for OpenGL control -->
                            <Border Name="OpenGLContainer" Background="#000000">
                                <TextBlock Text="3D Viewport - OpenGL Rendering" 
                                           HorizontalAlignment="Center" VerticalAlignment="Center"
                                           Foreground="#666666" FontSize="16"/>
                            </Border>
                            
                            <!-- Overlay Controls -->
                            <StackPanel HorizontalAlignment="Left" VerticalAlignment="Top" 
                                        Background="#33000000" Margin="10">
                                <TextBlock Text="Camera Controls" FontWeight="Bold" Margin="5"/>
                                <TextBlock Text="Left Click + Drag: Rotate" FontSize="11" Margin="5,0"/>
                                <TextBlock Text="Right Click + Drag: Pan" FontSize="11" Margin="5,0"/>
                                <TextBlock Text="Scroll: Zoom" FontSize="11" Margin="5,0"/>
                            </StackPanel>
                            
                            <!-- Performance Overlay -->
                            <StackPanel HorizontalAlignment="Right" VerticalAlignment="Bottom" 
                                        Background="#33000000" Margin="10">
                                <TextBlock Name="LiveLinkFpsText" Text="FPS: --" FontSize="11" Margin="5,2" Foreground="#00ff00"/>
                                <TextBlock Name="LiveLinkSyncText" Text="Sync: --/s" FontSize="11" Margin="5,2" Foreground="#ffff00"/>
                                <TextBlock Name="LiveLinkErrorsText" Text="Errors: 0" FontSize="11" Margin="5,2" Foreground="#ff6b35"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                    
                    <!-- Debug Log Panel -->
                    <Border Grid.Column="1" Background="#1e1e1e" BorderBrush="#555555" 
                            BorderThickness="1" Margin="0,10,5,10">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <!-- Debug Log Header -->
                            <Border Grid.Row="0" Background="#333333" Padding="12,8">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="ðŸ—’ï¸ ACTIVITY LOG" FontWeight="Bold" 
                                               Foreground="#ff6b35" VerticalAlignment="Center"/>
                                    <StackPanel Grid.Column="1" Orientation="Horizontal">
                                        <Button Name="LiveLinkClearLogButton" Content="ðŸ—‘ï¸" 
                                                Click="LiveLinkClearLogButton_Click" 
                                                Width="28" Height="28" Padding="0" Margin="2,0,0,0"
                                                ToolTip.Tip="Clear activity log"/>
                                        <Button Name="LiveLinkSaveLogButton" Content="ðŸ’¾" 
                                                Click="LiveLinkSaveLogButton_Click" 
                                                Width="28" Height="28" Padding="0" Margin="2,0,0,0"
                                                ToolTip.Tip="Save log to file"/>
                                    </StackPanel>
                                </Grid>
                            </Border>
                            
                            <!-- Debug Log Content -->
                            <ScrollViewer Grid.Row="1" Name="LiveLinkLogScrollViewer" 
                                          Background="#1e1e1e" Padding="0">
                                <TextBox Name="LiveLinkLogTextBox" IsReadOnly="True" 
                                         AcceptsReturn="True" TextWrapping="Wrap"
                                         FontFamily="Consolas" FontSize="11"
                                         Background="Transparent" Foreground="#ffffff"
                                         BorderThickness="0" Padding="12,8"
                                         Text="ðŸ—’ï¸ [System] LiveLink debug log initialized&#x0A;"/>
                            </ScrollViewer>
                            
                            <!-- Debug Log Footer -->
                            <Border Grid.Row="2" Background="#2d2d30" Padding="8,6">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <CheckBox Grid.Column="0" Name="VerboseLoggingCheckBox" 
                                              Content="ðŸ“ Verbose" FontSize="10" 
                                              Foreground="#cccccc" Margin="0,0,10,0"
                                              ToolTip.Tip="Enable detailed debug logging"/>
                                    <TextBlock Grid.Column="2" Name="LogStatsText" 
                                               Text="Lines: 1" FontSize="10" 
                                               Foreground="#888888" VerticalAlignment="Center"/>
                                </Grid>
                            </Border>
                        </Grid>
                    </Border>
                    
                    <!-- Controls Panel -->
                    <Border Grid.Column="2" Background="#252526" BorderBrush="#555555" 
                            BorderThickness="1,1,1,1" Margin="0,10,10,10">
                        <ScrollViewer>
                            <StackPanel Margin="15">
                                <TextBlock Text="Camera Control" FontSize="16" FontWeight="Bold" 
                                           Margin="0,0,0,15" Foreground="#ff6b35"/>
                                
                                <!-- Camera Position -->
                                <TextBlock Text="Position" FontWeight="Bold" Margin="0,0,0,5"/>
                                <Grid Margin="0,0,0,10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="20"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                    </Grid.RowDefinitions>
                                    
                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="X:" VerticalAlignment="Center"/>
                                    <TextBox Grid.Row="0" Grid.Column="1" Name="CameraPosX" Text="0.0" Margin="5,2"/>
                                    
                                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Y:" VerticalAlignment="Center"/>
                                    <TextBox Grid.Row="1" Grid.Column="1" Name="CameraPosY" Text="0.0" Margin="5,2"/>
                                    
                                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Z:" VerticalAlignment="Center"/>
                                    <TextBox Grid.Row="2" Grid.Column="1" Name="CameraPosZ" Text="5.0" Margin="5,2"/>
                                </Grid>
                                
                                <!-- Camera Target -->
                                <TextBlock Text="Target" FontWeight="Bold" Margin="0,0,0,5"/>
                                <Grid Margin="0,0,0,10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="20"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                    </Grid.RowDefinitions>
                                    
                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="X:" VerticalAlignment="Center"/>
                                    <TextBox Grid.Row="0" Grid.Column="1" Name="CameraTargetX" Text="0.0" Margin="5,2"/>
                                    
                                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Y:" VerticalAlignment="Center"/>
                                    <TextBox Grid.Row="1" Grid.Column="1" Name="CameraTargetY" Text="0.0" Margin="5,2"/>
                                    
                                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Z:" VerticalAlignment="Center"/>
                                    <TextBox Grid.Row="2" Grid.Column="1" Name="CameraTargetZ" Text="0.0" Margin="5,2"/>
                                </Grid>
                                
                                <!-- Action Buttons -->
                                <Button Name="GetCameraButton" Content="ðŸ“· Get Camera" 
                                        Click="GetCameraButton_Click" IsEnabled="False" 
                                        HorizontalAlignment="Stretch" Margin="0,5"/>
                                <Button Name="SetCameraButton" Content="ðŸ“¤ Set Camera" 
                                        Click="SetCameraButton_Click" IsEnabled="False" 
                                        HorizontalAlignment="Stretch" Margin="0,5"/>
                                <Button Name="ResetCameraButton" Content="ðŸ”„ Reset Camera" 
                                        Click="ResetCameraButton_Click" IsEnabled="False" 
                                        HorizontalAlignment="Stretch" Margin="0,5"/>
                                
                                <Separator Margin="0,15" Background="#555555"/>
                                
                                <!-- Sync Options -->
                                <TextBlock Text="Synchronization" FontSize="16" FontWeight="Bold" 
                                           Margin="0,0,0,10" Foreground="#ff6b35"/>
                                <CheckBox Name="AutoSyncCheckBox" Content="Auto-sync with Octane" 
                                          IsChecked="True" Margin="0,5"/>
                                <CheckBox Name="RealTimeCheckBox" Content="Real-time updates" 
                                          IsChecked="False" Margin="0,5"/>
                                
                                <Separator Margin="0,15" Background="#555555"/>
                                
                                <!-- Scene Info -->
                                <TextBlock Text="Scene Information" FontSize="16" FontWeight="Bold" 
                                           Margin="0,0,0,10" Foreground="#ff6b35"/>
                                <Button Name="GetMeshesButton" Content="ðŸ“¦ Get Meshes" 
                                        Click="GetMeshesButton_Click" IsEnabled="False" 
                                        HorizontalAlignment="Stretch" Margin="0,5"/>
                                <TextBlock Name="MeshCountText" Text="Meshes: 0" 
                                           FontSize="12" Margin="0,5" Foreground="#cccccc"/>
                            </StackPanel>
                        </ScrollViewer>
                    </Border>
                </Grid>
            </TabItem>
            
            <!-- API Testing Tab -->
            <TabItem Header="ðŸ”§ API Testing">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="350"/>    <!-- Controls -->
                        <ColumnDefinition Width="*"/>      <!-- Log -->
                    </Grid.ColumnDefinitions>
                    
                    <!-- API Controls Panel -->
                    <Border Grid.Column="0" Background="#252526" BorderBrush="#555555" 
                            BorderThickness="1" Margin="10">
                        <ScrollViewer>
                            <StackPanel Margin="15">
                                <TextBlock Text="API Testing" FontSize="16" FontWeight="Bold" 
                                           Margin="0,0,0,15" Foreground="#ff6b35"/>
                                
                                <!-- Camera API Section -->
                                <TextBlock Text="Camera API" FontWeight="Bold" Margin="0,0,0,10"/>
                                <Button Name="ApiGetCameraButton" Content="ðŸ“· Get Camera Position" 
                                        Click="GetCameraButton_Click" IsEnabled="False" 
                                        HorizontalAlignment="Stretch" Margin="0,2"/>
                                <Button Name="ApiSetCameraButton" Content="ðŸ“¤ Set Camera Position" 
                                        Click="SetCameraButton_Click" IsEnabled="False" 
                                        HorizontalAlignment="Stretch" Margin="0,2"/>
                                
                                <Separator Margin="0,15" Background="#555555"/>
                                
                                <!-- LiveLink API Section -->
                                <TextBlock Text="LiveLink API" FontWeight="Bold" Margin="0,0,0,10"/>
                                <Button Name="ApiGetMeshesButton" Content="ðŸ“¦ Get Scene Meshes" 
                                        Click="GetMeshesButton_Click" IsEnabled="False" 
                                        HorizontalAlignment="Stretch" Margin="0,2"/>
                                <Button Name="ApiGetRenderInfoButton" Content="ðŸŽ¬ Get Render Info" 
                                        Click="GetRenderInfoButton_Click" IsEnabled="False" 
                                        HorizontalAlignment="Stretch" Margin="0,2"/>
                                
                                <Separator Margin="0,15" Background="#555555"/>
                                
                                <!-- Test Utilities -->
                                <TextBlock Text="Utilities" FontWeight="Bold" Margin="0,0,0,10"/>
                                <Button Name="PingServerButton" Content="ðŸ“ Ping Server" 
                                        Click="PingServerButton_Click" IsEnabled="False" 
                                        HorizontalAlignment="Stretch" Margin="0,2"/>
                                <Button Name="ClearLogButton" Content="ðŸ—‘ï¸ Clear Log" 
                                        Click="ClearLogButton_Click" 
                                        HorizontalAlignment="Stretch" Margin="0,2"/>
                                
                                <Separator Margin="0,15" Background="#555555"/>
                                
                                <!-- Performance Monitoring -->
                                <TextBlock Text="Performance" FontWeight="Bold" Margin="0,0,0,10"/>
                                <TextBlock Name="RequestCountText" Text="Requests: 0" 
                                           FontSize="12" Margin="0,2" Foreground="#cccccc"/>
                                <TextBlock Name="AvgResponseTimeText" Text="Avg Response: 0ms" 
                                           FontSize="12" Margin="0,2" Foreground="#cccccc"/>
                                <TextBlock Name="LastErrorText" Text="Last Error: None" 
                                           FontSize="12" Margin="0,2" Foreground="#cccccc"/>
                            </StackPanel>
                        </ScrollViewer>
                    </Border>
                    
                    <!-- Log Panel -->
                    <Border Grid.Column="1" Background="#1e1e1e" BorderBrush="#555555" 
                            BorderThickness="1" Margin="0,10,10,10">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            
                            <!-- Log Header -->
                            <Border Grid.Row="0" Background="#333333" Padding="10,8">
                                <TextBlock Text="ðŸ“‹ API Response Log" FontWeight="Bold" 
                                           Foreground="#ff6b35"/>
                            </Border>
                            
                            <!-- Log Content -->
                            <ScrollViewer Grid.Row="1" Name="LogScrollViewer">
                                <TextBox Name="LogTextBox" IsReadOnly="True" 
                                         AcceptsReturn="True" TextWrapping="Wrap"
                                         FontFamily="Consolas" FontSize="11"
                                         Background="Transparent" Foreground="#ffffff"
                                         BorderThickness="0" Padding="10"/>
                            </ScrollViewer>
                        </Grid>
                    </Border>
                </Grid>
            </TabItem>
            
        </TabControl>
    </Grid>
</Window>
